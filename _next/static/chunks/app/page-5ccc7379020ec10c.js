(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{77476:function(e,t,l){Promise.resolve().then(l.bind(l,42539))},42539:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return _components_AddPost}});var s=l(57437),n=l(44181),o=l(2265),a=l(39576),i=l(59215),d=l(64717),r=l.n(d),c=l(78868),u=l(25370),p=l(25136),y=l(57721),h=l(20496),m=l(56459),x=l(89636),_components_UpdatePost=function(e){let{post:t,onUpdate:l,onCancel:d}=e,[u,p]=(0,o.useState)(!1),[y]=a.Z.useForm(),updateData=async e=>{p(!0);try{let{data:s}=await n.Z.put("https://jsonplaceholder.typicode.com/posts/".concat(t.id),{title:e.title,body:e.body});l(s),c.ZP.success("post updated successfully"),p(!1),y.resetFields()}catch(e){console.log("===================================="),console.log(e),console.log("===================================="),c.ZP.error("please try again"),p(!1)}};return(0,s.jsxs)(a.Z,{form:y,layout:"vertical",onFinish:updateData,initialValues:{title:t.title,body:t.body},children:[(0,s.jsx)(a.Z.Item,{label:"Title",name:"title",rules:[{required:!0,message:"Please enter a title!"}],children:(0,s.jsx)(i.default,{placeholder:"Enter post title"})}),(0,s.jsx)(a.Z.Item,{label:"Body",name:"body",rules:[{required:!0,message:"Please enter the body!"}],children:(0,s.jsx)(i.default.TextArea,{rows:4,placeholder:"Enter post content"})}),(0,s.jsx)(a.Z.Item,{children:(0,s.jsx)(r(),{type:"primary",htmlType:"submit",loading:u,block:!0,children:"Update"})}),(0,s.jsx)(r(),{onClick:d,block:!0,children:"Cancel"})]})},_components_DeletePost=e=>{let{id:t,onDelete:l}=e,[a,i]=(0,o.useState)(!1),handleDelete=async()=>{i(!0);try{await n.Z.delete("https://jsonplaceholder.typicode.com/posts/".concat(t)),c.ZP.success("Post deleted successfully"),l(t)}catch(e){c.ZP.error("Failed to delete post")}finally{i(!1)}};return(0,s.jsx)(r(),{type:"primary",danger:!0,onClick:handleDelete,loading:a,children:"Delete"})},Post=function(e){let{isData:t}=e,[l,a]=(0,o.useState)([]),[i,d]=(0,o.useState)(null),[c,j]=(0,o.useState)(null),[f,b]=(0,o.useState)(!1),[g,P]=(0,o.useState)(!0);(0,o.useEffect)(()=>{let getData=async()=>{try{let{data:e}=await n.Z.get("http://jsonplaceholder.typicode.com/posts");a([...e,...t]),P(!1)}catch(e){d("err fetch")}};getData()},[t]);let handeleEdit=e=>{j(e),b(!0)},handleCancel=()=>{b(!1),j(null)},handleDeletePost=e=>{a(t=>t.filter(t=>t.id!==e))};if(g)return(0,s.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,s.jsx)(y.default,{spinning:g})});if(i)return(0,s.jsx)(h.Z,{message:"error",description:i,type:"error"});let Z=[{title:"Post",dataIndex:"id",key:"id"},{title:"Title ",dataIndex:"title",key:"title"},{title:"Body",dataIndex:"body",key:"body"},{title:"Update",key:"action",render:(e,t)=>(0,s.jsx)(r(),{onClick:()=>handeleEdit(t),type:"primary",children:"Edit"})},{title:"Delete",key:"action",render:(e,t)=>(0,s.jsx)(_components_DeletePost,{id:t.id,onDelete:handleDeletePost})}];return(0,s.jsxs)("div",{style:{padding:"20px"},children:[(0,s.jsx)(m.Z,{gutter:[16,16],children:(0,s.jsx)(x.Z,{xs:24,sm:24,md:24,lg:24,children:(0,s.jsx)(p.Z,{columns:Z,dataSource:l,rowKey:"id"})})}),(0,s.jsx)(u.Z,{title:"Edit Post",open:f,onCancel:handleCancel,footer:null,destroyOnClose:!0,children:c&&(0,s.jsx)(_components_UpdatePost,{post:c,onUpdate:e=>{a(t=>t.map(t=>t.id===e.id?{...t,...e}:t)),handleCancel()},onCancel:handleCancel})})]})},_components_AddPost=function(){let[e,t]=(0,o.useState)(!1),[l,d]=(0,o.useState)(!1),[p,y]=(0,o.useState)([]),[h]=a.Z.useForm(),onSubmit=async e=>{d(!0);try{let{data:l}=await n.Z.post("https://jsonplaceholder.typicode.com/posts",{title:e.title,body:e.body});console.log(l),y(e=>[...e,l]),h.resetFields(),c.ZP.success("post added successfully"),t(!1)}catch(e){c.ZP.error("please try again")}finally{d(!1)}};return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{style:{padding:"20px"},children:[(0,s.jsx)("h1",{style:{display:"flex",justifyContent:"center",position:"relative"},children:"CRUD"}),(0,s.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:"20px"},children:(0,s.jsx)(r(),{type:"primary",onClick:()=>{t(!0)},children:"Add New Post"})})]}),(0,s.jsx)(u.Z,{title:"Create a New Post",open:e,onCancel:()=>{t(!1)},footer:null,destroyOnClose:!0,children:(0,s.jsxs)(a.Z,{form:h,layout:"vertical",onFinish:onSubmit,initialValues:{title:"",body:""},children:[(0,s.jsx)(a.Z.Item,{label:"Title",name:"Title",rules:[{required:!0,message:"Please enter a title!"}],children:(0,s.jsx)(i.default,{placeholder:"Enter post title"})}),(0,s.jsx)(a.Z.Item,{label:"Body",name:"Body",rules:[{required:!0,message:"Please enter the body!"}],children:(0,s.jsx)(i.default.TextArea,{rows:4,placeholder:"Enter post content"})}),(0,s.jsx)(a.Z.Item,{children:(0,s.jsx)(r(),{type:"primary",htmlType:"submit",loading:l,block:!0,children:"Submit"})})]})}),(0,s.jsx)(Post,{isData:p})]})}}},function(e){e.O(0,[717,971,472,744],function(){return e(e.s=77476)}),_N_E=e.O()}]);